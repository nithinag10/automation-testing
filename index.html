
        <!DOCTYPE html>
        <html>
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Android Automation</title>
            <style>
                body { font-family: Arial, sans-serif; margin: 0; padding: 10px; text-align: center; max-width: 800px; margin: 0 auto; }
                h1 { color: #333; font-size: 24px; margin: 10px 0; }
                .screenshot { max-width: 70%; height: auto; border: 1px solid #ddd; margin: 10px 0; }
                .info { margin: 10px 0; }
                .step { font-weight: bold; }
                .form-group { margin: 10px 0; text-align: left; }
                label { display: block; margin-bottom: 5px; font-weight: bold; }
                input[type="text"] { width: 100%; padding: 8px; box-sizing: border-box; }
                button { background-color: #4CAF50; color: white; padding: 10px 15px; border: none; cursor: pointer; margin-top: 10px; }
                button:hover { background-color: #45a049; }
                .refresh-button { background-color: #2196F3; margin-bottom: 15px; }
                .status { padding: 8px; border-radius: 4px; margin: 10px 0; }
                .pending { background-color: #fff3cd; color: #856404; }
                .success { background-color: #d4edda; color: #155724; }
                .error { background-color: #f8d7da; color: #721c24; }
            </style>
        </head>
        <body>
            <h1>Android Automation with React Agent</h1>
            <div class="info">
                <p class="step">Step: 1</p>
            </div>
            <button class="refresh-button" onclick="window.location.reload()">Refresh Screen</button>
            <img class="screenshot" src="/session_20250319_081005/screenshot_20250319_081045.png" alt="Android Screen">
            <div class="form-group">
                <label for="instruction">Enter Natural Language Instruction:</label>
                <input type="text" id="instruction" name="instruction" placeholder="E.g., Click the menu button" required>
                <button type="button" id="execute-btn" onclick="submitInstruction()">Execute</button>
            </div>
            <div id="status" class="status" style="display: none;"></div>
            
            <script>
                // Function to submit the instruction using fetch API
                function submitInstruction() {
                    const instructionInput = document.getElementById('instruction');
                    const statusDiv = document.getElementById('status');
                    const executeBtn = document.getElementById('execute-btn');
                    
                    // Get the instruction
                    const instruction = instructionInput.value.trim();
                    if (!instruction) {
                        statusDiv.className = 'status error';
                        statusDiv.style.display = 'block';
                        statusDiv.innerHTML = 'Please enter an instruction';
                        return;
                    }
                    
                    // Disable button and show pending status
                    executeBtn.disabled = true;
                    statusDiv.className = 'status pending';
                    statusDiv.style.display = 'block';
                    statusDiv.innerHTML = 'Processing instruction...';
                    
                    // Create form data
                    const formData = new URLSearchParams();
                    formData.append('instruction', instruction);
                    
                    // Send the instruction using fetch
                    fetch('/process_action', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/x-www-form-urlencoded',
                        },
                        body: formData.toString()
                    })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Network response was not ok: ' + response.status);
                        }
                        return response.json();
                    })
                    .then(data => {
                        console.log('Success:', data);
                        
                        // Update status based on response
                        if (data.success) {
                            statusDiv.className = 'status success';
                        } else {
                            statusDiv.className = 'status error';
                        }
                        statusDiv.innerHTML = data.message;
                        
                        // Re-enable button
                        executeBtn.disabled = false;
                        
                        // Clear the input field
                        instructionInput.value = '';
                        
                        // Automatically refresh after successful action (with a delay)
                        if (data.success) {
                            setTimeout(() => window.location.reload(), 2000);
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        statusDiv.className = 'status error';
                        statusDiv.innerHTML = 'Error: ' + error.message;
                        executeBtn.disabled = false;
                    });
                }
            </script>
        </body>
        </html>
        